<%- include('layouts/app') -%>

<div class="container py-4 fade-in">
    <h3 class="mb-3">МКС данные</h3>

    <div class="row g-3">
        <div class="col-md-6">
            <div class="card shadow-sm slide-up">
                <div class="card-body">
                    <h5 class="card-title">Последний снимок</h5>
                    <% if (last.payload) { %>
                        <ul class="list-group">
                            <li class="list-group-item">Широта: <%= last.payload.latitude || '—' %></li>
                            <li class="list-group-item">Долгота: <%= last.payload.longitude || '—' %></li>
                            <li class="list-group-item">Высота: <%= last.payload.altitude ? last.payload.altitude + ' км' : '—' %></li>
                            <li class="list-group-item">Скорость: <%= last.payload.velocity ? new Intl.NumberFormat('ru-RU').format(last.payload.velocity) + ' км/ч' : '—' %></li>
                            <li class="list-group-item">Время: <%= last.fetched_at || '—' %></li>
                        </ul>
                    <% } else { %>
                        <div class="text-muted">нет данных</div>
                    <% } %>
                    <div class="mt-3"><code><%= base %>/last</code></div>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card shadow-sm slide-up">
                <div class="card-body">
                    <h5 class="card-title">Тренд движения</h5>
                    <% if (trend && Object.keys(trend).length > 0) { %>
                        <ul class="list-group">
                            <li class="list-group-item">Движение: <%= trend.movement ? 'да' : 'нет' %></li>
                            <li class="list-group-item">Смещение: <%= trend.delta_km ? parseFloat(trend.delta_km).toFixed(3) + ' км' : '0 км' %></li>
                            <li class="list-group-item">Интервал: <%= trend.dt_sec ? trend.dt_sec + ' сек' : '0 сек' %></li>
                            <li class="list-group-item">Скорость: <%= trend.velocity_kmh ? trend.velocity_kmh + ' км/ч' : '—' %></li>
                        </ul>
                    <% } else { %>
                        <div class="text-muted">нет данных</div>
                    <% } %>
                    <div class="mt-3"><code><%= base %>/iss/trend</code></div>
                    <div class="mt-3"><a class="btn btn-outline-primary" href="/osdr">Перейти к OSDR</a></div>
                </div>
            </div>
        </div>
    </div>
</div>
